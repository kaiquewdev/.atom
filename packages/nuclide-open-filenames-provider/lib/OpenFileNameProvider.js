

// Returns the currently opened tabs, ordered from most recently opened to least recently opened.
'use babel';

/*
 * Copyright (c) 2015-present, Facebook, Inc.
 * All rights reserved.
 *
 * This source code is licensed under the license found in the LICENSE file in
 * the root directory of this source tree.
 */

function getOpenTabsMatching(query) {
  var queryRegExp = new RegExp(query, 'i');
  return atom.workspace.getTextEditors().map(function (editor) {
    return editor.getPath();
  }).filter(function (path) {
    return path != null && (!query.length || queryRegExp.test(path));
  }).map(function (file) {
    return { path: file, matchIndexes: [] };
  });
}

var OpenFileListProvider = {

  getName: function getName() {
    return 'OpenFileListProvider';
  },

  getProviderType: function getProviderType() {
    return 'GLOBAL';
  },

  getDebounceDelay: function getDebounceDelay() {
    return 0;
  },

  getAction: function getAction() {
    return 'nuclide-open-filenames-provider:toggle-provider';
  },

  getPromptText: function getPromptText() {
    return 'Search names of open files';
  },

  getTabTitle: function getTabTitle() {
    return 'Open Files';
  },

  executeQuery: function executeQuery(query) {
    return Promise.resolve(getOpenTabsMatching(query));
  }

};

module.exports = OpenFileListProvider;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi92YXIvZm9sZGVycy93MS9fMm1jNm0wNTBxbjIzMm5wc2Y5ejNoZnNoNThfamgvVC90bXBpMzV6akdwdWJsaXNoX3BhY2thZ2VzL2FwbS9udWNsaWRlLW9wZW4tZmlsZW5hbWVzLXByb3ZpZGVyL2xpYi9PcGVuRmlsZU5hbWVQcm92aWRlci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFBQSxXQUFXLENBQUM7Ozs7Ozs7Ozs7QUFrQlosU0FBUyxtQkFBbUIsQ0FBQyxLQUFhLEVBQXFCO0FBQzdELE1BQUksV0FBVyxHQUFHLElBQUksTUFBTSxDQUFDLEtBQUssRUFBRSxHQUFHLENBQUMsQ0FBQztBQUN6QyxTQUFPLElBQUksQ0FBQyxTQUFTLENBQUMsY0FBYyxFQUFFLENBQ25DLEdBQUcsQ0FBQyxVQUFBLE1BQU07V0FBSSxNQUFNLENBQUMsT0FBTyxFQUFFO0dBQUEsQ0FBQyxDQUMvQixNQUFNLENBQUMsVUFBQSxJQUFJO1dBQUksSUFBSSxJQUFJLElBQUksS0FBSyxDQUFDLEtBQUssQ0FBQyxNQUFNLElBQUksV0FBVyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQSxBQUFDO0dBQUEsQ0FBQyxDQUN6RSxHQUFHLENBQUMsVUFBQSxJQUFJO1dBQUssRUFBQyxJQUFJLEVBQUUsSUFBSSxFQUFFLFlBQVksRUFBRSxFQUFFLEVBQUM7R0FBQyxDQUFDLENBQUM7Q0FDbEQ7O0FBRUQsSUFBSSxvQkFBOEIsR0FBRzs7QUFFbkMsU0FBTyxFQUFBLG1CQUFXO0FBQ2hCLFdBQU8sc0JBQXNCLENBQUM7R0FDL0I7O0FBRUQsaUJBQWUsRUFBQSwyQkFBaUI7QUFDOUIsV0FBTyxRQUFRLENBQUM7R0FDakI7O0FBRUQsa0JBQWdCLEVBQUEsNEJBQVc7QUFDekIsV0FBTyxDQUFDLENBQUM7R0FDVjs7QUFFRCxXQUFTLEVBQUEscUJBQVc7QUFDbEIsV0FBTyxpREFBaUQsQ0FBQztHQUMxRDs7QUFFRCxlQUFhLEVBQUEseUJBQVc7QUFDdEIsV0FBTyw0QkFBNEIsQ0FBQztHQUNyQzs7QUFFRCxhQUFXLEVBQUEsdUJBQVc7QUFDcEIsV0FBTyxZQUFZLENBQUM7R0FDckI7O0FBRUQsY0FBWSxFQUFBLHNCQUFDLEtBQWEsRUFBOEI7QUFDdEQsV0FBTyxPQUFPLENBQUMsT0FBTyxDQUFDLG1CQUFtQixDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7R0FDcEQ7O0NBRUYsQ0FBQzs7QUFFRixNQUFNLENBQUMsT0FBTyxHQUFHLG9CQUFvQixDQUFDIiwiZmlsZSI6Ii92YXIvZm9sZGVycy93MS9fMm1jNm0wNTBxbjIzMm5wc2Y5ejNoZnNoNThfamgvVC90bXBpMzV6akdwdWJsaXNoX3BhY2thZ2VzL2FwbS9udWNsaWRlLW9wZW4tZmlsZW5hbWVzLXByb3ZpZGVyL2xpYi9PcGVuRmlsZU5hbWVQcm92aWRlci5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2UgYmFiZWwnO1xuLyogQGZsb3cgKi9cblxuLypcbiAqIENvcHlyaWdodCAoYykgMjAxNS1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBsaWNlbnNlIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgaW5cbiAqIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICovXG5cbmltcG9ydCB0eXBlIHtcbiAgRmlsZVJlc3VsdCxcbiAgUHJvdmlkZXIsXG4gIFByb3ZpZGVyVHlwZSxcbn0gZnJvbSAnbnVjbGlkZS1xdWljay1vcGVuLWludGVyZmFjZXMnO1xuXG4vLyBSZXR1cm5zIHRoZSBjdXJyZW50bHkgb3BlbmVkIHRhYnMsIG9yZGVyZWQgZnJvbSBtb3N0IHJlY2VudGx5IG9wZW5lZCB0byBsZWFzdCByZWNlbnRseSBvcGVuZWQuXG5mdW5jdGlvbiBnZXRPcGVuVGFic01hdGNoaW5nKHF1ZXJ5OiBzdHJpbmcpOiBBcnJheTxGaWxlUmVzdWx0PiB7XG4gIHZhciBxdWVyeVJlZ0V4cCA9IG5ldyBSZWdFeHAocXVlcnksICdpJyk7XG4gIHJldHVybiBhdG9tLndvcmtzcGFjZS5nZXRUZXh0RWRpdG9ycygpXG4gICAgLm1hcChlZGl0b3IgPT4gZWRpdG9yLmdldFBhdGgoKSlcbiAgICAuZmlsdGVyKHBhdGggPT4gcGF0aCAhPSBudWxsICYmICghcXVlcnkubGVuZ3RoIHx8IHF1ZXJ5UmVnRXhwLnRlc3QocGF0aCkpKVxuICAgIC5tYXAoZmlsZSA9PiAoe3BhdGg6IGZpbGUsIG1hdGNoSW5kZXhlczogW119KSk7XG59XG5cbnZhciBPcGVuRmlsZUxpc3RQcm92aWRlcjogUHJvdmlkZXIgPSB7XG5cbiAgZ2V0TmFtZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiAnT3BlbkZpbGVMaXN0UHJvdmlkZXInO1xuICB9LFxuXG4gIGdldFByb3ZpZGVyVHlwZSgpOiBQcm92aWRlclR5cGUge1xuICAgIHJldHVybiAnR0xPQkFMJztcbiAgfSxcblxuICBnZXREZWJvdW5jZURlbGF5KCk6IG51bWJlciB7XG4gICAgcmV0dXJuIDA7XG4gIH0sXG5cbiAgZ2V0QWN0aW9uKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuICdudWNsaWRlLW9wZW4tZmlsZW5hbWVzLXByb3ZpZGVyOnRvZ2dsZS1wcm92aWRlcic7XG4gIH0sXG5cbiAgZ2V0UHJvbXB0VGV4dCgpOiBzdHJpbmcge1xuICAgIHJldHVybiAnU2VhcmNoIG5hbWVzIG9mIG9wZW4gZmlsZXMnO1xuICB9LFxuXG4gIGdldFRhYlRpdGxlKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuICdPcGVuIEZpbGVzJztcbiAgfSxcblxuICBleGVjdXRlUXVlcnkocXVlcnk6IHN0cmluZyk6IFByb21pc2U8QXJyYXk8RmlsZVJlc3VsdD4+IHtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGdldE9wZW5UYWJzTWF0Y2hpbmcocXVlcnkpKTtcbiAgfSxcblxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBPcGVuRmlsZUxpc3RQcm92aWRlcjtcbiJdfQ==
